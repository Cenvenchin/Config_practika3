# Инструкция по тестированию проекта

## Исправленные проблемы

1. ✅ Исправлен импорт `Dict` в `assembler/translator.py`

## Как запускать тесты

### В PyCharm Terminal:

1. Убедитесь, что виртуальное окружение активировано (должно быть `(.venv)` в начале строки)

2. Запустите быстрый тест:
```bash
python quick_test.py
```

Ожидаемый вывод:
```
Тест 1: Импорт модулей...
  ✓ Модули ассемблера импортированы
  ✓ Модули интерпретатора импортированы

Тест 2: Парсинг YAML...
  ✓ Парсинг успешен, получено инструкций: 1

Тест 3: Трансляция...
  ✓ Трансляция успешна, получено команд: 1
  Первая команда: {'A': 2, 'B': 124, 'C': 828}

Тест 4: Генерация кода...
  ✓ Генерация успешна, получено байт: 5
  Байты: ['0xc2', '0xe7', '0x19', '0x0', '0x0']

Тест 5: Проверка соответствия тестовым данным...
  ✓ Код соответствует ожидаемому!

============================================================
Все базовые тесты пройдены!
============================================================
```

3. Запустите все тесты:
```bash
python run_all_tests.py
```

Ожидаемый вывод:
```
============================================================
Запуск tests/test1.py
============================================================
Тест load_const:
  Ожидается: ['0xc2', '0xe7', '0x19', '0x0', '0x0']
  Получено:   ['0xc2', '0xe7', '0x19', '0x0', '0x0']
  ✓ ТЕСТ ПРОЙДЕН
...
============================================================
РЕЗУЛЬТАТЫ ТЕСТОВ
============================================================
tests/test1.py: ✓ ПРОЙДЕН
tests/test2.py: ✓ ПРОЙДЕН
tests/test3.py: ✓ ПРОЙДЕН
tests/test4.py: ✓ ПРОЙДЕН
============================================================
Все тесты пройдены успешно!
```

## Использование ассемблера

1. Ассемблирование с тестовым выводом:
```bash
python -m assembler.cli examples/test_load_constant.yaml output/test.bin --test
```

Ожидаемый вывод:
```
Промежуточное представление:
  Инструкция 0: A=2, B=124, C=828

Машинный код (байты):
  0xC2, 0xE7, 0x19, 0x00, 0x00

Ассемблировано команд: 1
Результат сохранен в: output/test.bin
```

2. Ассемблирование без тестового вывода:
```bash
python -m assembler.cli examples/test_load_constant.yaml output/test.bin
```

## Использование интерпретатора

1. Выполнение программы:
```bash
python -m interpreter.cli output/test.bin output/memory.xml
```

Ожидаемый вывод:
```
Программа выполнена успешно
Дамп памяти сохранен в: output/memory.xml
```

2. Выполнение с указанием диапазона дампа:
```bash
python -m interpreter.cli output/test.bin output/memory.xml --start 0 --end 1024
```

## Проверка файлов

После выполнения команд проверьте созданные файлы:

1. Бинарный файл должен быть создан:
```bash
# В Windows PowerShell:
Get-Item output\test.bin
# Должен показать файл размером несколько байт
```

2. XML дамп должен быть создан:
```bash
# В Windows PowerShell:
Get-Content output\memory.xml
# Должен показать XML содержимое
```

## Возможные проблемы

1. **Ошибка "name 'Dict' is not defined"**
   - ✅ Исправлено: добавлен импорт `Dict` в `assembler/translator.py`

2. **Ошибка "No module named 'yaml'"**
   - Решение: установите зависимости `pip install -r requirements.txt`

3. **Ошибка "FileNotFoundError"**
   - Убедитесь, что вы находитесь в корневой директории проекта
   - Проверьте, что файлы существуют в указанных путях

4. **Ошибка импорта модулей**
   - Убедитесь, что вы используете Python 3.7+
   - Проверьте, что виртуальное окружение активировано

## Структура команд

Все команды должны запускаться из корневой директории проекта:
```
C:\Users\artim\PycharmProjects\config_practika3>
```

Убедитесь, что в начале строки есть `(.venv)`, что означает активированное виртуальное окружение.

